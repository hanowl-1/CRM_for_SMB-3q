{
  "id": "da43c0d7-1538-4da6-8fce-60693896a153",
  "name": "테스트",
  "description": "테스트",
  "target_config": {
    "targetGroups": [
      {
        "id": "target_1750829454055",
        "name": "명덕가든 테스트",
        "type": "dynamic",
        "dynamicQuery": {
          "sql": "SELECT * FROM supermembers.Ads\nwhere id = '7341'",
          "lastCount": 1,
          "description": "명덕가든 테스트",
          "expectedFields": [
            "contact",
            "name",
            "id"
          ]
        },
        "estimatedCount": 1
      }
    ]
  },
  "message_config": {
    "steps": [
      {
        "id": "step_KA01TP250610072652095M0BPif67w7I_1750833569024",
        "name": "113. [슈퍼멤버스] [사장님] 1개월 성과 리포트 - 상위 블로거 참여 O 발송",
        "action": {
          "id": "action_KA01TP250610072652095M0BPif67w7I_1750833569024",
          "type": "send_alimtalk",
          "variables": {
            "total_reviews": "23",
            "blog_post_rank": "--",
            "naver_place_rank": "--",
            "total_post_views": "--",
            "monthly_review_count": "--",
            "top_5p_reviewers_count": "--"
          },
          "templateId": "KA01TP250610072652095M0BPif67w7I",
          "templateCode": "MEMBERS_113_Pif67w7I",
          "templateName": "113. [슈퍼멤버스] [사장님] 1개월 성과 리포트 - 상위 블로거 참여 O",
          "personalization": {
            "enabled": true,
            "fallbackBehavior": "use_default",
            "variableMappings": [
              {
                "formatter": "text",
                "sourceType": "query",
                "actualValue": "23",
                "sourceField": "SELECT\n  ad.id AS adId,\n  COUNT(ct.id) AS totalContractCount\nFROM\n  Ads ad\nJOIN\n  Contracts ct ON ad.id = ct.company\nWHERE\n  ct.currentState >= 1\nGROUP BY\n  ad.id;",
                "defaultValue": "",
                "selectedColumn": "totalContractCount",
                "templateVariable": "#{total_reviews}"
              },
              {
                "formatter": "text",
                "sourceType": "field",
                "sourceField": "",
                "defaultValue": "--",
                "templateVariable": "#{monthly_review_count}"
              },
              {
                "formatter": "text",
                "sourceType": "field",
                "sourceField": "",
                "defaultValue": "--",
                "templateVariable": "#{top_5p_reviewers_count}"
              },
              {
                "formatter": "text",
                "sourceType": "field",
                "sourceField": "",
                "defaultValue": "--",
                "templateVariable": "#{total_post_views}"
              },
              {
                "formatter": "text",
                "sourceType": "field",
                "sourceField": "",
                "defaultValue": "--",
                "templateVariable": "#{naver_place_rank}"
              },
              {
                "formatter": "text",
                "sourceType": "field",
                "sourceField": "",
                "defaultValue": "--",
                "templateVariable": "#{blog_post_rank}"
              }
            ]
          },
          "scheduleSettings": {
            "type": "recurring",
            "timezone": "Asia/Seoul",
            "recurringPattern": {
              "time": "15:45",
              "interval": 1,
              "frequency": "daily"
            }
          }
        },
        "position": {
          "x": 100,
          "y": 100
        }
      }
    ]
  },
  "mapping_config": {
    "targetTemplateMappings": [
      {
        "id": "mapping_target_1750829454055_KA01TP250610072652095M0BPif67w7I_1750829459290",
        "createdAt": "2025-06-25T05:30:59.290Z",
        "updatedAt": "2025-06-25T05:31:09.543Z",
        "templateId": "KA01TP250610072652095M0BPif67w7I",
        "fieldMappings": [
          {
            "formatter": "text",
            "targetField": "id",
            "templateVariable": "total_reviews"
          },
          {
            "formatter": "text",
            "targetField": "id",
            "templateVariable": "monthly_review_count"
          },
          {
            "formatter": "text",
            "targetField": "id",
            "templateVariable": "top_5p_reviewers_count"
          },
          {
            "formatter": "text",
            "targetField": "id",
            "templateVariable": "total_post_views"
          },
          {
            "formatter": "text",
            "targetField": "id",
            "templateVariable": "naver_place_rank"
          },
          {
            "formatter": "text",
            "targetField": "id",
            "templateVariable": "blog_post_rank"
          }
        ],
        "targetGroupId": "target_1750829454055"
      }
    ]
  },
  "schedule_config": {
    "type": "recurring",
    "timezone": "Asia/Seoul",
    "recurringPattern": {
      "time": "20:35",
      "interval": 1,
      "frequency": "daily"
    }
  }
}
